<html>
	<header>
	<meta charset="UTF-8">
	<title>Настройка FTP</title>
	</header>
	<style>
	 .text_header {
	 	color: rgb(255,87,0);
	 	margin: 10px;
	 	}
	 .text_chapter {
	 	margin: 10px;
	 	}
	 .text_link a {
	 	color: rgb(255,87,0);
	 	text-decoration: none;
	 	}
	 .text_cmdline {
	 	background: #FF7500;
	 	color: #FFFFFF;
	 	font-family: monospace, monospace;
	 	}
	 .text_highlight {
	 	background: #00FFA7;
	 	}
	 	ul.menu li{
	 		display: inline;
	 		margin: 15px;
	 		
	 		}
	</style>
	
	<body>
	
	<table align="center" border="0" width="90%">
	
	
	<tr>
	<td>
	<img src="Images/logo.png" height="100px">
	</td>
	
	<td><p><h1 align="left">Изучаем FTP в HaikuOS</h1></p></td>
	</tr>
	<tr>
			<td colspan="2">
				<p ><ul class="menu" align="center">
				<li class="text_link"><a href="index.html"><b>Главная</b></a></li>
				<li class="text_link"><a href="index.html"><b>Назад</b></a></li>
				</ul></p>
				</td>
	</tr>
	<tr>
			
			<td colspan="2">
			<h3 class="text_header">Момент о безопасности \ логин пароль</h3>
			<hr>
			<p class="text_chapter">По умолчанию в <b>HaikuOS</b> пользователь назван <b>user</b>, а пароль нигде не используется (и возможно не установлен?), поэтому перед выполнением действий внутри сети, нам нужно его изменить для безопасности и удобства, следующей командой (при вводе пароля, никаких обозначений не показывается)</p>
			<p class="text_cmdline">passwd</p>
			<p>После этого нам необходимо включить сам <b>FTP</b> сервер, самый простой вариант уже присутвующий в системе, можно включить через настройки сети, но <u class="text_highlight">он не поддерживает шифрование, потому имейте ввиду, что работать с таким сервером вне локальной сети не безопасно.</u></p>
			<p> </p>
			<h3 class="text_header">Включение Встроенного FTP</h3>
			<hr>
			<p>Открываем меню <b>DeskBar</b>, находим раздел <b>Preferences</b>, в нем открываем приложение для настройки сети <b>Network</b><p><img src="Images/ScreenShots/Network_Hostname.gif" alt="Скриншот окна настроек, с открытым разделом Hostname settings в списке"></p>В разделе <b>Hostname settings</b> мы можем установить имя компьютера в сети, по умолчанию оно shreder. Так же под названием интерфейсов сетевых подключений, в скобках, мы можем увидеть локальные <b>IP</b> адреса нашей HaikuBox, в нашем примере это <b>192.168.0.102 .</b>
<p><img src="Images\ScreenShots\Network_FTP.gif" alt="Раздел FTP Server в приложении Network"></p>
В разделе <b>FTP Server</b> мы можем запустить уже сам сервер.
<p> </p>
<h3 class="text_header">Подключение к FTP, загрузка\выгрузка файлов.</h3>
<hr>
<p><img src="Images\ScreenShots\FileZilla_Connect.gif" alt="Окно программы FileZilla с заполнеными полями для подключения."></p>
В этом гайде мы используем клиент <b>FileZilla</b> доступный для установки в <b>HaikuDepot</b>. Для подключения мы указываем Адрес машины-хоста к которой будем подключаться, в нашем примере это другая машина с адресом <b><i>192.168.0.103</i></b> в качестве имени пользователя User и пароль установленный нами на другой машине, порт же по умолчанию для <b>FTP - 21</b>.

<p> </p>
<h3 class="text_header">Рекомендация \ нюанс при передаче файлов.</h3>
<hr>
Есть два типа передачи данных по протоколу FTP - это ASCII, подходящий для текста и Binary, рекомендуемый для текста и прочих файлов. Разница кратко говоря лишь в том, что при Binary режиме клиентом не воспринимаются случайные управляющие символы, которые могут помешать при передачи файла. Давайте посмотрим на примере.
Настройка Transfer, Transfer type установлена в режиме AUTO (но опытным путем выяснено, что выбирается ASCII), так вот попробуем загрузить себе изображение kitsune jpg и проверим, что у нас получилось.
<p><img src="Images\ScreenShots\FileZilla_ascii1.gif" alt="Скриншот окна клиента, где видно не соответвие размеров загруженого файла"></p>
Загрузка произведена успешно, но нас должен насторожить различный размер загруженого и исходного файлов - 251,525 Байт и 251,529 Байт, разница в нашем случае в 4 байта, тоесть при передаче изображения, клиент поймал несколько управляющих символов, что побили файл, на нашем примере это выразилось искажениями на картинке.
<p><img src="Images\ScreenShots\FileZilla_ascii2.gif" alt="Пример битого в результате такой передачи изображения"></p>
Давайте откроем терминал, перейдем в директорию, куда загружено изображение и создадим его хэш сумму для проверки.
<p class="text_cmdline">cd Pictures/</p>
<p class="text_cmdline">sha1sum kitsune.jpg</p>
Получим следующую хэш сумму <u class="text_highlight">3c7661e88ce86f8773ee6820fcb080583b7674d8  kitsune.jpg</u>
После чего переключим режим передачи в <b>Binary</b>, после чего повторим попытку создав и сверив хэшсуммы на сервере и клиенте, а также размер.
Размер Соответсвует - 251,529 Байт, а хэш суммы на сервере и клиенте совпадают и равны <u class="text_highlight">0864af78d5d8a805f9b6d3e0b92bd44214f3e08f  kitsune.jpg</u>. Зрительно результат тоже стал лучше.
<p><img src="Images\ScreenShots\FileZilla_binary.gif"></p>
На этом все.


</p>
			
			</td>
	</tr>
	<tr>
		<td colspan="2">
		<hr>
		<p><i>Последнее обновление 26.02.2023</i><p>
		</td>
	</tr>
	</table>
	
	
	
	</body>

</html>
